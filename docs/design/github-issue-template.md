# GitHub Issue Template: LT セッション管理機能の追加

## 📋 Issue Title

`feat: Add LT Session Management System - Phase 1-6 Implementation`

## 📝 Issue Description

### 🎯 概要

LT の回数と日付を管理する新しいテーブル（`lt_sessions`）を追加し、各 LT との 1 対多の関係を構築します。管理者用ページでのセッション管理機能と、スケジュール表示の改善を実現します。

### 🚀 主な機能追加

- **新規テーブル**: `lt_sessions`（第 ○ 回、日付、venue 等を管理）
- **管理者機能**: セッションの表示・作成・編集・削除
- **投稿フォーム**: venue 選択 → セッション選択に変更
- **スケジュール**: 時間表示改善 + 第 ○ 回情報表示
- **時間制限**: 発表時間を 16:30-18:00 に制限

### 📊 設計書

- [API 設計書](docs/design/apis.md)
- [データベース設計書](docs/design/db.md)
- [実装計画書](docs/design/implementation-plan.md)
- [テスト計画書](docs/design/testing-plan.md)

---

## 🔧 技術的詳細

### データベース変更

- **新規テーブル**: `lt_sessions`
  - `session_number` (integer): 第 ○ 回
  - `date` (text): 開催日
  - `venue` (text): 開催場所
  - `start_time`/`end_time`: 開始・終了時間
- **talks テーブル修正**: `session_id` 追加、`venue` 削除予定

### API 変更

- **新規**: `GET/POST/PUT/DELETE /api/lt-sessions`
- **新規**: `GET /api/available-sessions`
- **修正**: `/api/schedule-dates`, `/api/daily-schedule`
- **修正**: `/api/talks` (venue → session_id)

---

## 📋 実装タスク

### Phase 1: データベース基盤 (1 週間)

- [ ] `lt_sessions`テーブル設計・作成
- [ ] Drizzle ORM スキーマ定義
- [ ] マイグレーション実行
- [ ] セッション CRUD API 実装
- [ ] 型定義更新

### Phase 2: 管理者機能 (1 週間)

- [ ] 管理者ページに新タブ追加
- [ ] セッション一覧コンポーネント
- [ ] セッション作成・編集フォーム
- [ ] セッション削除機能
- [ ] 時間制限バリデーション

### Phase 3: 投稿フォーム修正 (1 週間)

- [ ] `TalkForm.tsx` venue 削除
- [ ] セッション選択機能追加
- [ ] 日付制限（セッション存在日のみ）
- [ ] 時間制限（16:30-18:00）
- [ ] `EditableTalkCard.tsx` 修正

### Phase 4: スケジュール改善 (1 週間)

- [ ] `SchedulePage.tsx` UI 改善
- [ ] 時間表示を左側に移動
- [ ] 第 ○ 回セッション情報表示
- [ ] venue 情報をセッションから取得
- [ ] API 修正（JOIN 対応）

### Phase 5: テスト・調整 (1 週間)

- [ ] 統合テスト実施
- [ ] データ整合性確認
- [ ] UI/UX テスト
- [ ] パフォーマンステスト
- [ ] エラーハンドリング確認

### Phase 6: クリーンアップ（オプション）

- [ ] マイグレーション（venue 削除）
- [ ] 不要コード削除
- [ ] 最適化・ドキュメント更新

---

## ⚠️ 注意事項・リスク

### 高リスク項目

- **既存データ移行**: 慎重な計画とバックアップが必須
- **外部キー制約**: 段階的マイグレーションで対応
- **API 同期**: フロント・バックエンドの密な連携

### データ保護

- セッション削除時: `talk.session_id`を NULL に設定
- 既存トークデータ: 完全保持（venue から session へ移行）
- バックアップ: 各フェーズ前に実施

---

## 📈 期待される効果

### 管理面での改善

- セッション情報の一元管理
- 第 ○ 回という明確な区分
- venue 情報の統一

### ユーザー体験の向上

- より分かりやすいスケジュール表示
- 時間情報の視認性向上
- セッション単位での情報整理

### 開発・運用面

- データ構造の正規化
- 管理作業の効率化
- 将来的な拡張への対応

---

## 🔍 成功基準

- [ ] 既存のトーク機能が 100%動作
- [ ] データ移行が完全成功
- [ ] 新機能が仕様通り動作
- [ ] パフォーマンス劣化なし
- [ ] ユーザビリティの向上

---

## 👥 関連人員

- **実装リーダー**: [担当者名]
- **フロントエンド**: [担当者名]
- **バックエンド**: [担当者名]
- **QA・テスト**: [担当者名]

---

## 📅 予定スケジュール

**開始**: [開始日]
**完了予定**: [完了予定日（5 週間後）]

**マイルストーン**:

- Week 1: データベース基盤完成
- Week 2: セッション管理 UI 完成
- Week 3: フォーム修正完成
- Week 4: スケジュール改善完成
- Week 5: 全体テスト・リリース

---

## 📎 参考資料

- [現在のシステム分析結果](docs/design/apis.md#現状のapiエンドポイント)
- [データベース設計図](docs/design/db.md#新しいerd)
- [段階的実装計画](docs/design/implementation-plan.md#実装フェーズ)
